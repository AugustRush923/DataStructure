# 链表

链表是一种在组织和管理数据中起着至关重要的数据结构。它包含一系列节点，这些节点存储在内存中的随机位置，从而实现高效的内存管理。

链表中的每个节点都包含两个主要属性：数据部分和对序列中下一个节点的引用。

## 链表的优势

链表具有以下优势：

*   易于插入和删除
*   动态大小
*   内存效率

创建链表是为了克服在常规列表和数组中存储数据相关的各种缺点。

### 易于插入和删除

在列表中，在末尾以外的任何位置插入或删除元素需要将所有后续项移动到其他位置。此过程的时间复杂度为`O(n)`，并且会显著降低性能，尤其是在列表大小增长时。

但是，链表的运行方式不同。它们将元素存储在各种不连续的内存位置，并通过指向后续节点的指针将它们连接起来。此结构允许链表在任何位置添加或删除元素，只需修改链接以包含新元素或绕过已删除的元素既可。一旦确定了元素的位置，并且可以直接访问插入或删除点，就可以在`O(1)`时间内完成添加或删除节点。

### 动态大小

一般语言内提供的列表数据类型为了提供修改大小的灵活性都会是动态数组。但是，此过程涉及一系列复杂的操作，包括将阵列重新分配到新的、更大的内存块。这种重新分配效率低下，因为元素被复制到新块中，可能会分配比立即需要的更多的空间。

相比之下，链表可以动态增长和收缩，而无需重新分配或调整大小。

### 内存效率

列表为连续块中的所有元素分配内存。如果列表需要增长到超出其初始大小，这必须分配一个新的、更大的连续内存块中，然后将所有元素复制到这个新块中。此过程即耗时又低效，尤其是对于大型列表。另一方面，如果高估了列表的初始大小，则会浪费未使用的内存。

相比之下，链表会单独为每个元素分配内存。这种结构可以提高内存利用率，因为可以在添加新元素时再去分配内存。

## 链表的应用

虽然链表比常规列表和数组具有某些优势，但它们也有其局限性。

由于每个元素必须存储下个元素的指针才能构建起链表，因此使用链表时，每个元素的内存使用量更高。

此外，链表也无法直接访问数据。访问元素需要从链表开头开始按顺序遍历查找，从而导致`O(n)`的搜索时间复杂性。

使不使用链表是取决于特定需求的，要结合实际情况来决定。链表在以下情况下最适用：

*   需要经常插入和删除许多元素
*   数据大小是不可预测的或可能经常变化
*   不需要或很少直接访问元素
*   数据集包含大型元素或结构

## 链表的类型

链表有三种类型，每种类型在不同的场景下都有独特的优势。

### 单向链表

![单向链表](https://cdn.hdcheung.cn/image_460901ce89.png)

单向链表是最简单的链表类型，其中每个节点都包含一些数据和对序列中下一个节点的引用。它们只能在一个方向上遍历。

单向链表中的每个节点通常由两部分组成：

*   **数据**：存储在节点中的实际信息。
*   **下一个节点**：对下一个节点的引用。最后一个节点的下一个节点指针通常为null。

由于这些数据结构只能在单个方向上遍历，因此按值或索引访问特定元素需要从头部开始，并按顺序在节点中移动，直到找到所需的节点。此操作的时间复杂度为`O(n)`，因此对于大型链表而言，其效率极低。

在单向链表的开头插入或删除节点非常搞笑，时间复杂度仅为`O(1)`。但是，在中间或结尾插入或删除需要遍历列表，直到该节点，从而导致`O(n)`的时间复杂度。

单向链表的应用场景：

1.  **队列和栈**：单向链表常用于实现队列（FIFO）和栈（LIFO）。队列中元素按照先进先出的顺序排列，而栈中元素按照后进先出的顺序排列。单向链表的特性使得在队列和栈中插入和删除元素非常方便，尤其是在需要频繁在列表的开头插入或删除元素时，单向链表的性能优势更为明显。
2.  **LRU缓存**：LRU（Least Recently Used）缓存是一种缓存淘汰策略，其中最近最少使用的数据会被淘汰。单向链表结合哈希表常用于实现LRU缓存，因为单向链表在将节点移动到链表头部时非常高效。
3.  **多媒体应用**：在一些多媒体应用中，如图片查看器的上一张和下一张按钮、音乐播放器的上一首和下一首按钮等，都可以使用单向链表来管理和切换不同的媒体元素。
4.  **撤销和重做功能**：许多应用程序中都有撤销和重做功能，比如文档编辑器、图像处理软件等。这些功能可以使用单向链表来存储历史状态，便于用户进行撤销和重做操作。

### 双向链表

![](https://cdn.hdcheung.cn/image_262075bbba.png)

单向链表的一个缺点是，只能在单个方向上遍历它们，不能返回上一个节点。这种约束限制了我们执行需要双向导航操作的能力。

双向链表通过在每个节点中合并一个额外的指针来解决此问题，确保列表可以在两个方向上遍历。

双向链表中的每个节点都包含三个元素：

*   **数据**：存储在节点中的实际信息
*   **下一个节点**：对下一个节点的引用。最后一个节点的下一个节点指针通常为null。
*   **上一个节点**：对上一个节点的引用。第一个节点的上一个节点指针通常为null。

双向链表的应用场景：

1.  **文本编辑器中的撤销和重做功能**：双向链表非常适合用于实现文本编辑器中的撤销（undo）和重做（redo）功能。每次用户进行编辑操作时，可以将操作记录存储在双向链表中，便于用户随时撤销或重做操作。
2.  **LRU缓存**：类似于单向链表，双向链表也常用于实现LRU（Least Recently Used）缓存。LRU缓存中，最近访问的数据被保留在缓存中，而较早访问的数据被淘汰。双向链表可以使数据的访问顺序更加灵活，提高缓存的效率。
3.  **浏览器历史记录**：浏览器中的历史记录功能通常使用双向链表来实现。每次用户访问一个新页面，都可以将该页面添加到双向链表中，用户可以通过“前进”和“后退”按钮在历史记录中导航。
4.  **音乐播放器中的播放列表**：双向链表可以用于管理音乐播放器中的播放列表。每首歌曲可以表示为一个节点，节点之间通过双向指针连接，用户可以方便地在播放列表中切换歌曲。
5.  **图形用户界面（GUI）中的窗口管理**：在GUI应用程序中，窗口的管理和切换可以使用双向链表来实现。每个窗口可以表示为一个节点，用户可以通过双向链表快速切换不同的窗口。

### 循环链表

![](https://cdn.hdcheung.cn/image_fb33170995.png)

循环链表是链表的一种特殊形式，其中最后一个节点指向第一个节点，形成一个循环结构。这意味着，与我们目前看到的单向链表和双向链表不同，循环链表它会循环往复，不会结束。

循环链表的周期性使其非常适合需要连续循环的场景。

1.  **游戏开发**：在游戏开发中，循环链表可以用于实现游戏中的循环关卡或循环任务系统。例如，玩家完成一个关卡后自动进入下一个关卡，形成一个循环链表结构，使得玩家可以不断挑战关卡。
2.  **调度算法**：操作系统中的调度算法通常涉及到循环轮转的概念，可以使用循环链表来管理进程的调度顺序。通过循环链表，可以实现进程的循环调度，确保每个进程都有机会执行。
3.  **音乐播放列表**：在音乐播放器应用中，循环链表可以用于管理音乐播放列表。当用户播放完最后一首歌曲时，循环链表可以使得播放列表循环回到第一首歌曲，实现循环播放功能。
4.  **循环展示**：在展示类应用中，循环链表可以用于实现循环展示图片、广告或信息。通过循环链表，可以实现循环展示内容，确保用户可以持续浏览。
